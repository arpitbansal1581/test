from azure.ai.documentintelligence import DocumentIntelligenceClient, AnalyzeDocumentRequest
from azure.core.credentials import AzureKeyCredential

# Replace with your values
endpoint = "https://<your-resource>.cognitiveservices.azure.com"
api_key = "<your-key>"
model_id = "<your-custom-model-id>"

client = DocumentIntelligenceClient(endpoint=endpoint, credential=AzureKeyCredential(api_key))

with open("your-file.pdf", "rb") as f:
    request = AnalyzeDocumentRequest(base64_source=f.read())  # wraps the file data

    poller = client.begin_analyze_document(
        model_id=model_id,
        body=request  # MUST be passed as 'body'
    )

    result = poller.result()

# Print fields
for doc in result.documents:
    print(f"\nDocument Type: {doc.doc_type}")
    for field_name, field in doc.fields.items():
        value = field.content
        confidence = field.confidence
        print(f"{field_name}: {value} (Confidence: {confidence:.2f})")
