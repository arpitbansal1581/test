from azure.ai.documentintelligence import DocumentIntelligenceClient
from azure.core.credentials import AzureKeyCredential

# Replace with your values
endpoint = "https://<your-resource-name>.cognitiveservices.azure.com"
api_key = "<your-api-key>"
model_id = "<your-custom-model-id>"
document_path = "sample.pdf"  # or .jpg, .png, .tiff

# Initialize client
client = DocumentIntelligenceClient(endpoint=endpoint, credential=AzureKeyCredential(api_key))

# Open the document file
with open(document_path, "rb") as f:
    poller = client.begin_analyze_document(model_id=model_id, document=f)
    result = poller.result()

# Print all extracted fields
for doc in result.documents:
    print(f"\nDocument Type: {doc.doc_type}")
    print("Extracted Fields:")
    for field_name, field in doc.fields.items():
        content = field.content if field.content else "N/A"
        confidence = f"{field.confidence * 100:.1f}%" if field.confidence else "Unknown"
        print(f" - {field_name}: {content} (Confidence: {confidence})")
