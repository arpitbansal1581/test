from azure.ai.documentintelligence import DocumentModelAdministrationClient, AzureBlobContentSource
from azure.core.credentials import AzureKeyCredential

# Replace these values with your actual info
endpoint = "https://<your-resource-name>.cognitiveservices.azure.com"
key = "<your-form-recognizer-key>"
sas_url = "https://<your-storage>.blob.core.windows.net/<container>?<sas-token>"

# Create the admin client
client = DocumentModelAdministrationClient(endpoint=endpoint, credential=AzureKeyCredential(key))

# Start training the model
poller = client.begin_build_document_model(
    model_id="my-custom-model",
    build_mode="template",
    azure_blob_source=AzureBlobContentSource(container_url=sas_url),
    description="Model trained with SAS URL"
)

# Wait for training to complete
model = poller.result()

# Print result
print(f"Model ID: {model.model_id}")
print(f"Status: {model.api_version}, Created on: {model.created_date_time}")
