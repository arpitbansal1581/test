from azure.ai.documentintelligence import DocumentIntelligenceClient
from azure.ai.documentintelligence.models import BuildDocumentModelRequest, AzureBlobContentSource
from azure.core.credentials import AzureKeyCredential

# Replace with your values
endpoint = "https://<your-resource-name>.cognitiveservices.azure.com"
key = "<your-form-recognizer-key>"
sas_url = "https://<storage-account>.blob.core.windows.net/<container>?<sas-token>"

# Create client
client = DocumentIntelligenceClient(endpoint=endpoint, credential=AzureKeyCredential(key))

# Start training
poller = client.begin_build_document_model(
    model_id="custom-model-sas",
    build_mode="template",
    azure_blob_source=AzureBlobContentSource(container_url=sas_url),
    description="Model trained using SAS URL"
)

# Wait and get result
model = poller.result()
print(f"Model ID: {model.model_id}")
print(f"Status: {model.api_version}, Created: {model.created_date_time}")
